<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê²Œì„ ëª©ë¡</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            max-width: 1200px;
            width: 100%;
            padding: 20px;
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 2.5rem;
        }

        .games-grid {
            display: none;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            padding: 20px;
        }

        .game-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .game-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            border-color: #007bff;
        }

        .game-title {
            font-size: 1.2rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .game-id {
            font-size: 0.9rem;
            color: #666;
            background: #f8f9fa;
            padding: 5px 10px;
            border-radius: 15px;
            display: inline-block;
        }

        .mobile-message {
            display: none;
            text-align: center;
            color: #333;
            font-size: 1.2rem;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        /* ê°€ë¡œ í™”ë©´ì¼ ë•Œë§Œ ê²Œì„ ëª©ë¡ í‘œì‹œ */
        @media (orientation: landscape) and (min-width: 768px) {
            .games-grid {
                display: grid;
            }
            .mobile-message {
                display: none;
            }
        }

        /* ì„¸ë¡œ í™”ë©´ì´ê±°ë‚˜ ì‘ì€ í™”ë©´ì¼ ë•Œ ë©”ì‹œì§€ í‘œì‹œ */
        @media (orientation: portrait), (max-width: 767px) {
            .games-grid {
                display: none;
            }
            .mobile-message {
                display: block;
            }
        }

        .loading {
            text-align: center;
            color: #666;
            font-size: 1.1rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ® ê²Œì„ ëª©ë¡</h1>
        
        <div class="mobile-message">
            <h2>ğŸ“± ëª¨ë°”ì¼ ê²Œì„</h2>
            <div id="mobileGamesGrid" class="games-grid" style="display: grid; margin-top: 20px;">
                <div class="loading">ê²Œì„ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
            </div>
        </div>

        <div class="games-grid" id="gamesGrid">
            <div class="loading">ê²Œì„ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
        </div>
    </div>

    <script>
        // ê²Œì„ ë°ì´í„°ë¥¼ ì €ì¥í•  ë³€ìˆ˜
        let allGames = [];
        let desktopOnlyGames = [];
        let mobileOnlyGames = [];
        let desktopGames = [];
        let mobileGames = [];

        // info.json íŒŒì¼ì—ì„œ ê²Œì„ ì •ë³´ ë¡œë“œ
        async function loadGamesInfo() {
            try {
                const response = await fetch('games/info.json');
                const gamesInfo = await response.json();

                // ê° ì¹´í…Œê³ ë¦¬ë³„ë¡œ ê²Œì„ ì •ë³´ ë³€í™˜
                allGames = (gamesInfo.all || []).map(game => ({
                    name: `${game.title}.html`,
                    folder: 'all',
                    description: game.description,
                    author: game.author
                }));

                desktopOnlyGames = (gamesInfo.desktop || []).map(game => ({
                    name: `${game.title}.html`,
                    folder: 'desktop',
                    description: game.description,
                    author: game.author
                }));

                mobileOnlyGames = (gamesInfo.mobile || []).map(game => ({
                    name: `${game.title}.html`,
                    folder: 'mobile',
                    description: game.description,
                    author: game.author
                }));

                // PCìš© ê²Œì„ ëª©ë¡ (desktop + all)
                desktopGames = [...desktopOnlyGames, ...allGames];

                // ëª¨ë°”ì¼ìš© ê²Œì„ ëª©ë¡ (mobile + all)
                mobileGames = [...mobileOnlyGames, ...allGames];

                return true;
            } catch (error) {
                console.error('ê²Œì„ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤:', error);
                return false;
            }
        }

        // í™”ë©´ ë°©í–¥ê³¼ í¬ê¸° í™•ì¸
        function checkScreenOrientation() {
            const isLandscape = window.innerWidth > window.innerHeight;
            const isWideScreen = window.innerWidth >= 768;
            
            return isLandscape && isWideScreen;
        }

        // ê²Œì„ ì¹´ë“œ ìƒì„± (ë°ìŠ¤í¬íƒ‘)
        function createGameCard(game) {
            const gameId = game.name.replace('.html', '');
            const card = document.createElement('div');
            card.className = 'game-card';
            card.onclick = () => navigateToGame(game.name, game.folder);
            
            const authorInfo = game.author ? `<div class="game-id">${game.author}</div>` : '';
            const descriptionInfo = game.description ? `<p style="font-size: 0.9rem; color: #888; margin-top: 8px;">${game.description}</p>` : '';
            
            card.innerHTML = `
                <div class="game-title">${gameId}</div>
                ${authorInfo}
                ${descriptionInfo}
            `;
            
            return card;
        }

        // ëª¨ë°”ì¼ ê²Œì„ ì¹´ë“œ ìƒì„±
        function createMobileGameCard(game) {
            const gameId = game.name.replace('.html', '');
            const card = document.createElement('div');
            card.className = 'game-card';
            card.onclick = () => navigateToGame(game.name, game.folder);
            
            const authorInfo = game.author ? `<div class="game-id">${game.author}</div>` : '';
            const descriptionInfo = game.description ? `<p style="font-size: 0.9rem; color: #888; margin-top: 8px;">${game.description}</p>` : '';
            
            card.innerHTML = `
                <div class="game-title">${gameId}</div>
                ${authorInfo}
                ${descriptionInfo}
            `;
            
            return card;
        }

        // ê²Œì„ìœ¼ë¡œ ì´ë™
        function navigateToGame(filename, folder) {
            window.location.href = `games/${folder}/${filename}`;
        }

        // ë°ìŠ¤í¬íƒ‘ ê²Œì„ ëª©ë¡ ë Œë”ë§
        function renderGames() {
            const gamesGrid = document.getElementById('gamesGrid');
            
            if (checkScreenOrientation()) {
                if (desktopGames.length === 0) {
                    gamesGrid.innerHTML = '<div class="loading">ê²Œì„ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
                    return;
                }
                
                gamesGrid.innerHTML = '';
                
                desktopGames.forEach(game => {
                    const card = createGameCard(game);
                    gamesGrid.appendChild(card);
                });
            }
        }

        // ëª¨ë°”ì¼ ê²Œì„ ëª©ë¡ ë Œë”ë§
        function renderMobileGames() {
            const mobileGamesGrid = document.getElementById('mobileGamesGrid');
            
            if (mobileGames.length === 0) {
                mobileGamesGrid.innerHTML = '<div class="loading">ëª¨ë°”ì¼ ê²Œì„ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
                return;
            }
            
            mobileGamesGrid.innerHTML = '';
            
            mobileGames.forEach(game => {
                const card = createMobileGameCard(game);
                mobileGamesGrid.appendChild(card);
            });
        }

        // ì´ˆê¸° ë Œë”ë§
        document.addEventListener('DOMContentLoaded', async () => {
            // ê²Œì„ ì •ë³´ ë¡œë“œ
            const loaded = await loadGamesInfo();
            
            if (loaded) {
                renderGames(); // ë°ìŠ¤í¬íƒ‘ ê²Œì„ ëª©ë¡ ë Œë”ë§
                renderMobileGames(); // ëª¨ë°”ì¼ ê²Œì„ ëª©ë¡ ë Œë”ë§
            } else {
                // ë¡œë“œ ì‹¤íŒ¨ ì‹œ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
                const gamesGrid = document.getElementById('gamesGrid');
                const mobileGamesGrid = document.getElementById('mobileGamesGrid');
                gamesGrid.innerHTML = '<div class="loading">ê²Œì„ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.</div>';
                mobileGamesGrid.innerHTML = '<div class="loading">ê²Œì„ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.</div>';
            }
        });

        // í™”ë©´ í¬ê¸° ë³€ê²½ ì‹œ ë‹¤ì‹œ í™•ì¸
        window.addEventListener('resize', () => {
            renderGames();
            renderMobileGames();
        });
        window.addEventListener('orientationchange', () => {
            setTimeout(() => {
                renderGames();
                renderMobileGames();
            }, 100); // ë°©í–¥ ë³€ê²½ í›„ ì•½ê°„ì˜ ì§€ì—°
        });
    </script>
</body>
</html>
